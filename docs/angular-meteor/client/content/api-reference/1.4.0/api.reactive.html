<template name="api.1.4.0.reactive">
  <div>
    <a href="https://github.com/Urigo/angular-meteor/edit/master/docs/angular-meteor/client/content/api-reference/1.4.0/api.reactive.html"
       class="btn btn-default btn-lg improve-button">
      <i class="glyphicon glyphicon-edit">&nbsp;</i>Improve this doc
    </a>

    <do-nothing>
      {{#markdown}}

# Reactive
<a class="src-code" href="https://github.com/Urigo/angular-meteor/blob/master/packages/angular-meteor-data/modules/reactive.js" target="_blank">
  src: angular-meteor-data/modules/reactive.js
</a>

A mixin which enhance our reactive abilities by providing methods that are capable of updating our scope reactively.

## Methods

### $helpers

Lets you define reactive properties on the `$scope` or the `view model` if set.

Gets a hash of reactive functions which will be rerunned any time their return value is changed. The keys of the hash will be the property names of which we would like to define whos values will be the results of the functions.

Under the hood, each helper starts a newc[Tracker.autorun](http://docs.meteor.com/#/full/tracker_autorun). When its reactive dependencies change, the helper is rerunned.

To trigger a rerun every time in specific Angular variable change, use `$reactivate` to make your Angular variable reactive inside the helper its used in.

Each helper function should return a [MongoDB Cursor](http://docs.meteor.com/#/full/mongo_cursor) and the helpers will expose it as a normal array to the context.

-------

#### Arguments

<table class="variables-matrix input-arguments">
  <thead>
  <tr>
    <th>Name</th>
    <th>Type</th>
    <th>Details</th>
    <th>Required</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td><strong>definitions</strong></td>
    <td>
      <a href="" class="label type-hint type-hint-object">Object</a><br/>
    </td>
    <td>A hash of functions, where the keys are the property names we would like to define and the values will match the results of the functions.
    Should return a <a href="http://docs.meteor.com/#/full/mongo_cursor">MongoDB Cursor</td>
    <td>Yes</td>
  </tr>
  </tbody>
</table>

------

#### Usage Example:

    myModule.controller('MyCtrl', ['$scope', function($scope) {
      $scope.$viewModel(this);

      this.$helpers({
        users: () => Users.find({})
      });
    }]);

> In this example we create an array on the view model, with all the values that are available from the returned Cursor.

#### Example with `$reactivate`:

    myModule.controller('MyCtrl', ['$scope', function($scope) {
      $scope.$viewModel(this);

      this.relevantId = 10;

      this.$helpers({
        users: () => Users.find({ _id: this.$reactivate('relevantId') })
      });
    }]);

> In this example, the helper will be rerunned any time `relevantId` is changed.

------

### $reactivate

Gets a property from the `$scope` or the `view model` if set, and will notify once changed.

-------

### Arguments

<table class="variables-matrix input-arguments">
  <thead>
  <tr>
    <th>Name</th>
    <th>Type</th>
    <th>Details</th>
    <th>Required</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td><strong>variableName</strong></td>
    <td>
      <a href="" class="label type-hint type-hint-string">String</a>
    </td>
    <td>The name of the context's variable to bind to</td>
    <td>Yes</td>
  </tr>
  <tr>
    <td>isDeep</td>
    <td>
      <a href="" class="label type-hint type-hint-function">Function</a><br />
      <a href="" class="label type-hint type-hint-boolean">Boolean</a>
    </td>
    <td>Use `true` to deep watch the object, or a function to provide custom equality function. The default value is `false`, which does a shallow / reference watch only.</td>
    <td>No</td>
  </tr>
  </tbody>
</table>

### Return value

This method returns the current value of the reactive variable.

-------

#### Example with `$subscribe`:

    myModule.controller('MyCtrl', ['$scope', function($scope) {
      $scope.$viewModel(this);

      this.relevantId = 10;

      this.$subscribe('users', () => {
        return [ this.$reactivate('relevantId') ];
      });

      this.relevantId = 50; // This will cause the subscribe arguments method to run again
    }]);

#### Example with `$helpers`:

    myModule.controller('MyCtrl', ['$scope', function($scope) {
      $scope.$viewModel(this);

      this.myUser = {
        id: 10
      };

      this.$helpers({
        myData: () => {
          return Data.find({_id: this.$reactivate('myUser.id')});
        }
      });

      this.myUser.id = 29; // This will cause the helper to run again and update the view
    }]);

      {{/markdown}}
    </do-nothing>

  </div>
</template>
